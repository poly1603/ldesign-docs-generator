# ğŸ“– è¿ç§»æŒ‡å— - v3.0 åŒæ¨¡å¼æ¶æ„

## ğŸ¯ æ¦‚è¿°

v3.0 å¼•å…¥äº†**åŒæ¨¡å¼æ¶æ„**ï¼Œåœ¨ä¿ç•™æ‰€æœ‰ç°æœ‰åŠŸèƒ½çš„åŒæ—¶ï¼Œæä¾› VitePress çº§åˆ«çš„å¼€å‘ä½“éªŒã€‚

---

## âœ… å‘åå…¼å®¹ä¿è¯

### å®Œå…¨å…¼å®¹çš„åœºæ™¯

ä»¥ä¸‹ä½¿ç”¨æ–¹å¼**æ— éœ€ä»»ä½•ä¿®æ”¹**å³å¯ç»§ç»­å·¥ä½œï¼š

```bash
# 1. ç”Ÿæˆå‘½ä»¤ï¼ˆå®Œå…¨ä¿ç•™ï¼‰
ldesign-docs generate

# 2. æ„å»ºå‘½ä»¤ï¼ˆé»˜è®¤æ··åˆæ¨¡å¼ï¼‰
ldesign-docs build

# 3. æ‰€æœ‰ç°æœ‰æ’ä»¶
typedocPlugin({ ... })
vueComponentPlugin({ ... })
markdownPlugin({ ... })

# 4. æ‰€æœ‰ç°æœ‰é…ç½®
export default defineConfig({
  sourceDir: './src',
  outputDir: './docs',
  plugins: [/* ...ç°æœ‰æ’ä»¶ */],
  // ...æ‰€æœ‰æ—§é…ç½®
})
```

---

## ğŸ†• æ–°åŠŸèƒ½

### 1. Dev æ¨¡å¼ - SPA å¼€å‘ä½“éªŒ

```bash
# å¯åŠ¨ SPA å¼€å‘æœåŠ¡å™¨
ldesign-docs dev

# ç‰¹æ€§ï¼š
âœ… å¯åŠ¨æ—¶é—´ < 1s
âœ… HMR çƒ­æ›´æ–° < 200ms
âœ… å®¢æˆ·ç«¯è·¯ç”±ï¼ˆæ— åˆ·æ–°ï¼‰
âœ… VitePress çº§åˆ«ä½“éªŒ
```

### 2. Build æ¨¡å¼é€‰æ‹©

```bash
# çº¯ SPA æ„å»º
ldesign-docs build --mode spa

# çº¯ SSG æ„å»ºï¼ˆç­‰åŒäºæ—§ç‰ˆ generateï¼‰
ldesign-docs build --mode ssg

# æ··åˆæ„å»ºï¼ˆæ¨èï¼Œé»˜è®¤ï¼‰
ldesign-docs build --mode hybrid
```

---

## ğŸ”„ ä»æ—§ç‰ˆè¿ç§»

### åœºæ™¯ 1: ç»§ç»­ä½¿ç”¨æ—§æ¨¡å¼ï¼ˆé›¶ä¿®æ”¹ï¼‰

å¦‚æœæ‚¨æ»¡æ„å½“å‰çš„é™æ€ç«™ç‚¹ç”Ÿæˆï¼Œ**æ— éœ€ä»»ä½•ä¿®æ”¹**ï¼š

```bash
# ç»§ç»­ä½¿ç”¨
ldesign-docs generate

# æˆ–è€…ä½¿ç”¨ç­‰ä»·çš„æ–°å‘½ä»¤
ldesign-docs build --mode ssg
```

### åœºæ™¯ 2: å‡çº§åˆ° SPA æ¨¡å¼ï¼ˆæ¨èï¼‰

#### æ­¥éª¤ 1: æµ‹è¯• dev æ¨¡å¼

```bash
ldesign-docs dev
```

è®¿é—® `http://localhost:3000`ï¼Œä½“éªŒ SPA å¼€å‘æ¨¡å¼ã€‚

#### æ­¥éª¤ 2: è°ƒæ•´æ„å»ºæ¨¡å¼

```bash
# ä½¿ç”¨æ··åˆæ¨¡å¼ï¼ˆæ¨èï¼‰
ldesign-docs build --mode hybrid

# è¾“å‡ºï¼š
# - SPA å•é¡µåº”ç”¨ï¼ˆä¸»ä½“ï¼‰
# - é¦–é¡µå’Œå…³é”®é¡µé¢é¢„æ¸²æŸ“ï¼ˆSEOï¼‰
# - æœç´¢ç´¢å¼•ã€sitemap.xmlã€robots.txt
```

#### æ­¥éª¤ 3: æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰

```typescript
// docs-generator.config.ts
export default defineConfig({
  // ... ç°æœ‰é…ç½®ä¿ç•™

  // å¯é€‰ï¼šæŒ‡å®šé»˜è®¤æ„å»ºæ¨¡å¼
  build: {
    mode: 'hybrid',  // 'spa' | 'ssg' | 'hybrid'
    prerender: true, // æ˜¯å¦é¢„æ¸²æŸ“å…³é”®é¡µé¢
  },

  // å¯é€‰ï¼šVite é…ç½®
  vite: {
    server: {
      port: 5173,
    },
  },
})
```

---

## ğŸ“Š æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | generate | build --mode ssg | build --mode spa | build --mode hybrid |
|------|----------|------------------|------------------|---------------------|
| è¾“å‡ºç±»å‹ | é™æ€ HTML | é™æ€ HTML | SPA | SPA + é¢„æ¸²æŸ“ |
| å®¢æˆ·ç«¯è·¯ç”± | âŒ | âŒ | âœ… | âœ… |
| SEO å‹å¥½ | âœ… | âœ… | âš ï¸ | âœ… |
| é¦–å±é€Ÿåº¦ | å¿« | å¿« | ä¸­ | å¿« |
| é¡µé¢åˆ‡æ¢ | åˆ·æ–° | åˆ·æ–° | å³æ—¶ | å³æ—¶ |
| æ¨èåœºæ™¯ | æ—§é¡¹ç›®å…¼å®¹ | çº¯é™æ€ç«™ç‚¹ | å•é¡µåº”ç”¨ | **é€šç”¨æ¨è** |

---

## ğŸ”§ é…ç½®è¿ç§»

### æ—§é…ç½®ï¼ˆå®Œå…¨å…¼å®¹ï¼‰

```typescript
export default defineConfig({
  sourceDir: './src',
  outputDir: './docs',
  plugins: [
    typedocPlugin({ tsconfig: './tsconfig.json' }),
    vueComponentPlugin({ include: '**/*.vue' }),
  ],
  site: {
    title: 'æ–‡æ¡£',
    description: 'æ–‡æ¡£ç«™ç‚¹',
  },
  theme: {
    name: 'default',
  },
})
```

### æ–°é…ç½®ï¼ˆå¯é€‰æ‰©å±•ï¼‰

```typescript
export default defineConfig({
  // ... æ‰€æœ‰æ—§é…ç½®ä¿ç•™

  // æ–°å¢ï¼šè¿è¡Œæ¨¡å¼é…ç½®ï¼ˆå¯é€‰ï¼‰
  mode: {
    dev: 'spa',        // dev å‘½ä»¤ä½¿ç”¨ SPA
    build: 'hybrid',   // build å‘½ä»¤ä½¿ç”¨æ··åˆæ¨¡å¼
  },

  // æ–°å¢ï¼šæ„å»ºé…ç½®ï¼ˆå¯é€‰ï¼‰
  build: {
    prerender: true,   // é¢„æ¸²æŸ“å…³é”®é¡µé¢
    ssr: false,        // æ˜¯å¦å¯ç”¨ SSRï¼ˆå®éªŒæ€§ï¼‰
  },

  // æ–°å¢ï¼šVite é…ç½®ï¼ˆå¯é€‰ï¼‰
  vite: {
    server: { port: 5173 },
    build: { minify: 'terser' },
  },
})
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: å‡çº§åç°æœ‰åŠŸèƒ½ä¼šè¢«ç ´åå—ï¼Ÿ

**A**: ä¸ä¼šã€‚æ‰€æœ‰æ–°åŠŸèƒ½éƒ½æ˜¯**å¢é‡æ·»åŠ **ï¼Œä¸ä¿®æ”¹ç°æœ‰ä»£ç ã€‚`generate` å‘½ä»¤å®Œå…¨ä¿ç•™ã€‚

### Q: æ’ä»¶éœ€è¦ä¿®æ”¹å—ï¼Ÿ

**A**: **ä¸éœ€è¦**ã€‚æ‰€æœ‰ç°æœ‰æ’ä»¶ï¼ˆtypedocPluginã€vueComponentPlugin ç­‰ï¼‰è‡ªåŠ¨å…¼å®¹ã€‚

æ’ä»¶å¯ä»¥**é€‰æ‹©æ€§æ‰©å±•**æ–° APIï¼š

```typescript
export function myPlugin(options) {
  return {
    name: 'my-plugin',
    version: '1.0.0',

    // æ—§ APIï¼ˆç»§ç»­å·¥ä½œï¼‰
    parse: async (context) => { /* ... */ },

    // æ–° APIï¼ˆå¯é€‰ï¼‰
    vitePlugin: () => createMyVitePlugin(),
    extendRoutes: (routes) => [...routes, myRoute],
  }
}
```

### Q: dev æ¨¡å¼å’Œ generate æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

| ç»´åº¦ | generate | dev |
|------|----------|-----|
| å¯åŠ¨æ–¹å¼ | å…ˆç”Ÿæˆ HTML â†’ å¯åŠ¨é™æ€æœåŠ¡å™¨ | ç›´æ¥å¯åŠ¨ Vite + SPA |
| æ›´æ–°é€Ÿåº¦ | éœ€è¦é‡æ–°ç”Ÿæˆ (æ…¢) | HMR å³æ—¶æ›´æ–° (å¿«) |
| è·¯ç”±æ–¹å¼ | è¶…é“¾æ¥è·³è½¬ (åˆ·æ–°) | å®¢æˆ·ç«¯è·¯ç”± (æ— åˆ·æ–°) |
| é€‚ç”¨åœºæ™¯ | æœ€ç»ˆéªŒè¯ã€éƒ¨ç½²å‰é¢„è§ˆ | æ—¥å¸¸å¼€å‘ |

### Q: å¦‚ä½•é€‰æ‹©æ„å»ºæ¨¡å¼ï¼Ÿ

- **hybrid**ï¼ˆæ¨èï¼‰ï¼šé€šç”¨åœºæ™¯ï¼Œå…¼é¡¾æ€§èƒ½å’Œ SEO
- **spa**ï¼šçº¯å•é¡µåº”ç”¨ï¼Œä¸éœ€è¦ SEO
- **ssg**ï¼šçº¯é™æ€ç«™ç‚¹ï¼Œå…¼å®¹æ—§ç‰ˆ

### Q: æ„å»ºè¾“å‡ºçš„æ–‡ä»¶ç»“æ„æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ

#### SSG æ¨¡å¼ï¼ˆæ—§ç‰ˆç›¸åŒï¼‰
```
dist/
â”œâ”€â”€ index.html
â”œâ”€â”€ guide/
â”‚   â””â”€â”€ getting-started.html
â””â”€â”€ assets/
    â””â”€â”€ styles.css
```

#### SPA/Hybrid æ¨¡å¼ï¼ˆæ–°å¢ï¼‰
```
dist/
â”œâ”€â”€ index.html              # SPA å…¥å£
â”œâ”€â”€ 404.html                # é¢„æ¸²æŸ“ï¼ˆhybridï¼‰
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-abc123.js     # SPA ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ chunk-def456.js     # è·¯ç”±åˆ†å—
â”‚   â””â”€â”€ style-ghi789.css    # æ ·å¼
â”œâ”€â”€ search-index.json       # æœç´¢ç´¢å¼•
â”œâ”€â”€ sitemap.xml             # ç«™ç‚¹åœ°å›¾
â””â”€â”€ robots.txt              # SEO
```

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | æ—§ç‰ˆ (generate) | v3.0 (dev) | v3.0 (build --mode hybrid) |
|------|-----------------|------------|----------------------------|
| å†·å¯åŠ¨æ—¶é—´ | ~5-10s | **< 1s** | N/A |
| æ–‡ä»¶ä¿®æ”¹æ›´æ–° | ~2-5s | **< 200ms** | N/A |
| é¡µé¢åˆ‡æ¢ | å®Œæ•´åˆ·æ–° | **å³æ—¶** | **å³æ—¶** |
| é¦–å±åŠ è½½ | å¿« | ä¸­ | **å¿«** |
| SEO | âœ… | âš ï¸ | âœ… |

---

## ğŸš€ æ¨èè¿ç§»è·¯å¾„

### é˜¶æ®µ 1: å°è¯•æ–° dev æ¨¡å¼ï¼ˆ0 é£é™©ï¼‰

```bash
# ä¸æ”¹ä»»ä½•é…ç½®ï¼Œç›´æ¥å°è¯•
ldesign-docs dev
```

### é˜¶æ®µ 2: æµ‹è¯•æ··åˆæ„å»ºï¼ˆä½é£é™©ï¼‰

```bash
# æ„å»ºå¹¶é¢„è§ˆ
ldesign-docs build --mode hybrid
ldesign-docs serve
```

### é˜¶æ®µ 3: æ­£å¼åˆ‡æ¢ï¼ˆé«˜æ”¶ç›Šï¼‰

```typescript
// æ›´æ–° package.json
{
  "scripts": {
    "docs:dev": "ldesign-docs dev",      // æ–°
    "docs:build": "ldesign-docs build",  // é»˜è®¤ hybrid
    "docs:preview": "ldesign-docs serve"
  }
}
```

---

## ğŸ“š æ›´å¤šèµ„æº

- [å®Œæ•´é‡æ„è®¡åˆ’](../REFACTORING_PLAN.md) - æŠ€æœ¯ç»†èŠ‚
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](../QUICK_START_REFACTORING.md) - å¼€å‘æŒ‡å—
- [è¿›åº¦æŠ¥å‘Š](../PROGRESS_REPORT.md) - å½“å‰è¿›åº¦

---

**æ›´æ–°æ—¶é—´**: 2025-10-28  
**ç‰ˆæœ¬**: v3.0.0-alpha  
**å…¼å®¹æ€§**: å‘å 100% å…¼å®¹
